{"ast":null,"code":"var _jsxFileName = \"F:\\\\UFOP\\\\WEB_II\\\\Ticket\\\\frontend\\\\src\\\\pages\\\\vendas\\\\VendasUpdateStatus.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { API_BASE_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS_OPTIONS = [{\n  value: 'EM_ABERTO',\n  label: 'Em Aberto'\n}, {\n  value: 'PAGO',\n  label: 'Pago'\n}, {\n  value: 'CANCELADO',\n  label: 'Cancelado'\n}, {\n  value: 'ESTORNADO',\n  label: 'Estornado'\n}];\nexport default function VendasAtualizarStatus() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [currentStatus, setCurrentStatus] = useState('EM_ABERTO');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Pré-carrega status atual para setar o default do select\n    fetch(`${API_BASE_URL}/sales/${id}`).then(res => {\n      if (!res.ok) throw new Error('Venda não encontrada');\n      return res.json();\n    }).then(data => setCurrentStatus(data.purchaseStatus || 'EM_ABERTO')).catch(() => {}) // silencioso\n    .finally(() => setLoading(false));\n  }, [id]);\n  const [status, setStatus] = useState('EM_ABERTO');\n  useEffect(() => {\n    setStatus(currentStatus);\n  }, [currentStatus]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const payload = {\n      id,\n      purchaseStatus: status\n    };\n    try {\n      const res = await fetch(`${API_BASE_URL}/sales/update/status`, {\n        method: 'POST',\n        // ajuste para PUT se sua API exigir\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        const msg = await res.text();\n        throw new Error(msg || 'Falha ao atualizar status');\n      }\n      await res.text();\n      navigate(`/vendas/${id}`);\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Carregando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Atualizar Status da Venda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Venda:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 10\n      }, this), \" \", id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Novo Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"purchaseStatus\",\n          className: \"form-control\",\n          value: status,\n          onChange: e => setStatus(e.target.value),\n          required: true,\n          children: STATUS_OPTIONS.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s.value,\n            children: s.label\n          }, s.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Atualizar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/vendas/${id}`,\n        className: \"btn btn-secondary ms-2\",\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(VendasAtualizarStatus, \"vWbl4CAVS4zyMRCNo2snU7PD8k8=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = VendasAtualizarStatus;\nvar _c;\n$RefreshReg$(_c, \"VendasAtualizarStatus\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Link","API_BASE_URL","jsxDEV","_jsxDEV","STATUS_OPTIONS","value","label","VendasAtualizarStatus","_s","id","navigate","currentStatus","setCurrentStatus","loading","setLoading","fetch","then","res","ok","Error","json","data","purchaseStatus","catch","finally","status","setStatus","handleSubmit","e","preventDefault","payload","method","headers","body","JSON","stringify","msg","text","err","alert","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","className","name","onChange","target","required","map","s","type","to","_c","$RefreshReg$"],"sources":["F:/UFOP/WEB_II/Ticket/frontend/src/pages/vendas/VendasUpdateStatus.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { API_BASE_URL } from '../config';\r\n\r\nconst STATUS_OPTIONS = [\r\n  { value: 'EM_ABERTO', label: 'Em Aberto' },\r\n  { value: 'PAGO', label: 'Pago' },\r\n  { value: 'CANCELADO', label: 'Cancelado' },\r\n  { value: 'ESTORNADO', label: 'Estornado' },\r\n];\r\n\r\nexport default function VendasAtualizarStatus() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [currentStatus, setCurrentStatus] = useState('EM_ABERTO');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Pré-carrega status atual para setar o default do select\r\n    fetch(`${API_BASE_URL}/sales/${id}`)\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error('Venda não encontrada');\r\n        return res.json();\r\n      })\r\n      .then((data) => setCurrentStatus(data.purchaseStatus || 'EM_ABERTO'))\r\n      .catch(() => {}) // silencioso\r\n      .finally(() => setLoading(false));\r\n  }, [id]);\r\n\r\n  const [status, setStatus] = useState('EM_ABERTO');\r\n  useEffect(() => { setStatus(currentStatus); }, [currentStatus]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const payload = { id, purchaseStatus: status };\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/sales/update/status`, {\r\n        method: 'POST', // ajuste para PUT se sua API exigir\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n      if (!res.ok) {\r\n        const msg = await res.text();\r\n        throw new Error(msg || 'Falha ao atualizar status');\r\n      }\r\n      await res.text();\r\n      navigate(`/vendas/${id}`);\r\n    } catch (err) {\r\n      alert(err.message);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Carregando...</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Atualizar Status da Venda</h1>\r\n      <p><strong>Venda:</strong> {id}</p>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label>Novo Status</label>\r\n          <select\r\n            name=\"purchaseStatus\"\r\n            className=\"form-control\"\r\n            value={status}\r\n            onChange={(e) => setStatus(e.target.value)}\r\n            required\r\n          >\r\n            {STATUS_OPTIONS.map(s => (\r\n              <option key={s.value} value={s.value}>{s.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\">Atualizar</button>\r\n        <Link to={`/vendas/${id}`} className=\"btn btn-secondary ms-2\">Cancelar</Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}