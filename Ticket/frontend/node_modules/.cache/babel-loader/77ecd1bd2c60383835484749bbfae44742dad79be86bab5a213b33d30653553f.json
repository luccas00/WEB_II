{"ast":null,"code":"var _jsxFileName = \"F:\\\\UFOP\\\\WEB_II\\\\Ticket\\\\frontend\\\\src\\\\pages\\\\vendas\\\\VendasCreate.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { API_BASE_URL } from '../Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STATUS_OPTIONS = [{\n  value: 'EM_ABERTO',\n  label: 'Em Aberto'\n}, {\n  value: 'CONCLUIDA',\n  label: 'Concluída'\n}, {\n  value: 'CANCELADA',\n  label: 'Cancelada'\n}];\n\n// Converte \"YYYY-MM-DDTHH:mm\" -> \"YYYY-MM-DDTHH:mm:ss\" (LocalDateTime, sem Z)\nfunction toLocalDateTime(value) {\n  if (!value) return null;\n  return value.length === 16 ? `${value}:00` : value; // já vem sem timezone do input\n}\nexport default function VendasCreate() {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    user_id: '',\n    event_id: '',\n    purchaseDate: '',\n    // datetime-local\n    purchaseStatus: 'EM_ABERTO'\n  });\n  const handleChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const payload = {\n      user_id: form.user_id || null,\n      event_id: form.event_id || null,\n      purchaseDate: toLocalDateTime(form.purchaseDate),\n      purchaseStatus: form.purchaseStatus || 'EM_ABERTO'\n    };\n    try {\n      const res = await fetch(`${API_BASE_URL}/sales`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || 'Erro ao criar venda');\n      }\n      await res.json();\n      navigate('/vendas');\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Criar Venda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Usu\\xE1rio (UUID)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"user_id\",\n          className: \"form-control\",\n          value: form.user_id,\n          onChange: handleChange,\n          placeholder: \"ex: 550e8400-e29b-41d4-a716-446655440000\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Evento (UUID)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"event_id\",\n          className: \"form-control\",\n          value: form.event_id,\n          onChange: handleChange,\n          placeholder: \"ex: 7d9b7a2f-8d9b-4a7c-9b2e-1a2b3c4d5e6f\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Data da Compra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"purchaseDate\",\n          type: \"datetime-local\",\n          className: \"form-control\",\n          value: form.purchaseDate,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Status da Compra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"purchaseStatus\",\n          className: \"form-control\",\n          value: form.purchaseStatus,\n          onChange: handleChange,\n          children: STATUS_OPTIONS.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s.value,\n            children: s.label\n          }, s.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Criar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary ms-2\",\n        onClick: () => navigate('/vendas'),\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(VendasCreate, \"9WVaR11PS8qyRQWy0HW45zwkP0c=\", false, function () {\n  return [useNavigate];\n});\n_c = VendasCreate;\nvar _c;\n$RefreshReg$(_c, \"VendasCreate\");","map":{"version":3,"names":["React","useState","useNavigate","API_BASE_URL","jsxDEV","_jsxDEV","STATUS_OPTIONS","value","label","toLocalDateTime","length","VendasCreate","_s","navigate","form","setForm","user_id","event_id","purchaseDate","purchaseStatus","handleChange","e","target","name","handleSubmit","preventDefault","payload","res","fetch","method","headers","body","JSON","stringify","ok","text","Error","json","err","alert","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","className","onChange","placeholder","required","type","map","s","onClick","_c","$RefreshReg$"],"sources":["F:/UFOP/WEB_II/Ticket/frontend/src/pages/vendas/VendasCreate.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { API_BASE_URL } from '../Config';\r\n\r\nconst STATUS_OPTIONS = [\r\n  { value: 'EM_ABERTO', label: 'Em Aberto' },\r\n  { value: 'CONCLUIDA', label: 'Concluída' },\r\n  { value: 'CANCELADA', label: 'Cancelada' },\r\n];\r\n\r\n// Converte \"YYYY-MM-DDTHH:mm\" -> \"YYYY-MM-DDTHH:mm:ss\" (LocalDateTime, sem Z)\r\nfunction toLocalDateTime(value) {\r\n  if (!value) return null;\r\n  return value.length === 16 ? `${value}:00` : value; // já vem sem timezone do input\r\n}\r\n\r\nexport default function VendasCreate() {\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({\r\n    user_id: '',\r\n    event_id: '',\r\n    purchaseDate: '',          // datetime-local\r\n    purchaseStatus: 'EM_ABERTO'\r\n  });\r\n\r\n  const handleChange = (e) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const payload = {\r\n      user_id: form.user_id || null,\r\n      event_id: form.event_id || null,\r\n      purchaseDate: toLocalDateTime(form.purchaseDate),\r\n      purchaseStatus: form.purchaseStatus || 'EM_ABERTO',\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/sales`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      if (!res.ok) {\r\n        const text = await res.text();\r\n        throw new Error(text || 'Erro ao criar venda');\r\n      }\r\n      await res.json();\r\n      navigate('/vendas');\r\n    } catch (err) {\r\n      alert(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Criar Venda</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label>Usuário (UUID)</label>\r\n          <input\r\n            name=\"user_id\"\r\n            className=\"form-control\"\r\n            value={form.user_id}\r\n            onChange={handleChange}\r\n            placeholder=\"ex: 550e8400-e29b-41d4-a716-446655440000\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label>Evento (UUID)</label>\r\n          <input\r\n            name=\"event_id\"\r\n            className=\"form-control\"\r\n            value={form.event_id}\r\n            onChange={handleChange}\r\n            placeholder=\"ex: 7d9b7a2f-8d9b-4a7c-9b2e-1a2b3c4d5e6f\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label>Data da Compra</label>\r\n          <input\r\n            name=\"purchaseDate\"\r\n            type=\"datetime-local\"\r\n            className=\"form-control\"\r\n            value={form.purchaseDate}\r\n            onChange={handleChange}\r\n          />\r\n          {/* Observação: backend pode sobrescrever para agora; deixe em branco se quiser usar o default do servidor */}\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label>Status da Compra</label>\r\n          <select\r\n            name=\"purchaseStatus\"\r\n            className=\"form-control\"\r\n            value={form.purchaseStatus}\r\n            onChange={handleChange}\r\n          >\r\n            {STATUS_OPTIONS.map(s => (\r\n              <option key={s.value} value={s.value}>{s.label}</option>\r\n            ))}\r\n          </select>\r\n          {/* Se o serviço fixar EM_ABERTO no create, este campo será ignorado pelo backend. */}\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\">Criar</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={() => navigate('/vendas')}>\r\n          Cancelar\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}